[TanStack å®˜ç½‘](https://tanstack.com)

## TanStack Table

TanStack Table æ˜¯ä¸€æ¬¾æ— å¤´UIåº“ï¼Œé€šä¿—ç‚¹è¯´ï¼Œå°±æ˜¯æä¾›å‡½æ•°ï¼Œä»¥åŠå¯¹æ•°æ®çš„å¤„ç†ï¼Œç›¸å¯¹æ¯”æœ‰ç»„ä»¶çš„è¡¨åº“æ¥è¯´å¯¹äºUIå’Œæ ·å¼æœ‰å¾ˆå¤§çš„æ“ä½œç©ºé—´ï¼Œä½†æ˜¯ç›¸å¯¹äºæœ‰ç»„ä»¶çš„è¡¨åº“æ¥è¯´ï¼Œéœ€è¦æ›´å¤šçš„CSSæ ·å¼å¤„ç†ï¼Œè€Œä¸æ˜¯æä¾›æ•°æ®å³å¯ã€‚

### å¼€å§‹

#### å®‰è£…

ä»¥`Raect`ä¸ºä¾‹

```
npm install @tanstack/react-table
```

#### å¸¸è§é—®é¢˜

##### ä¸€ç›´é¢‘ç¹æ¸²æŸ“

- **é”™è¯¯**
åœ¨ç»„ä»¶åˆå§‹æ¸²æŸ“çš„æ—¶å€™å°±å®šä¹‰åˆ—å’Œè¡Œï¼Œè¿™æ ·ä¼šå¯¼è‡´é¡µé¢åˆ·æ–°ä»è€Œåˆå®šä¹‰åˆ—å’Œè¡Œå¯¼è‡´æ— é™åˆ·æ–°
```js
export default function MyComponent() {
  //ğŸ˜µ BAD: This will cause an infinite loop of re-renders because `columns` is redefined as a new array on every render!
  const columns = [
    // ...
  ];

  //ğŸ˜µ BAD: This will cause an infinite loop of re-renders because `data` is redefined as a new array on every render!
  const data = [
    // ...
  ];

  //âŒ Columns and data are defined in the same scope as `useReactTable` without a stable reference, will cause infinite loop!
  const table = useReactTable({
    columns,
    data,
  });

  return <table>...</table>;
}
```

- **è§£å†³æ–¹æ¡ˆ**
éœ€è¦ä½¿ç”¨`useMemo`æ¥ç®¡ç†åˆ—å’Œè¡Œæ•°æ®ï¼Œè¿™æ ·å°±ä¸ä¼šä½¿å¾—æ•°æ®ä¸æ–­æ¸²æŸ“ã€‚
```js
//âœ… OK: Define columns outside of the component
const columns = [
  // ...
];

//âœ… OK: Define data outside of the component
const data = [
  // ...
];

// Usually it's more practical to define columns and data inside the component, so use `useMemo` or `useState` to give them stable references
export default function MyComponent() {
  //âœ… GOOD: This will not cause an infinite loop of re-renders because `columns` is a stable reference
  const columns = useMemo(() => [
    // ...
  ], []);

  //âœ… GOOD: This will not cause an infinite loop of re-renders because `data` is a stable reference
  const [data, setData] = useState(() => [
    // ...
  ]);

  // Columns and data are defined in a stable reference, will not cause infinite loop!
  const table = useReactTable({
    columns,
    data,
  });

  return <table>...</table>;
}
```

#### åŸºç¡€ä½¿ç”¨

##### åŸºæœ¬ç¤ºä¾‹
```jsx
import {
Â  useReactTable,
Â  flexRender,
Â  getCoreRowModel, Â  Â  Â  Â  Â  Â  Â  Â  Â // åŠæ—¶æ¸²æŸ“
} from "@tanstack/react-table"

const App = () => {

	const table = useReactTable({
		data,
		columns,
	})

	return (
		<table>
			{/* æ¸²æŸ“è¡¨å¤´ */}
			<thead>
				{
					table.getHeaderGroups().map((headerGroup) => {
						return (
							<tr key={headerGroup.id}>
								headerGroup.headers.map(header => (
									<th key={header.id}>
										{
											header.isPlaceholder ? null : 
											flexRender(
												header.column.columnDef.header,
												header.getContext()
											)
										}
									</th>
								))
							</tr>
						)
					})
				}
			</thead>
			{/* æ¸²æŸ“èº«ä½“ */}
			<tbody>
				{
					table.getRowModel().rows.map(row => {
						return (
							<tr key={row.id}>
								{
									row.getVisibleCells().map(cell => {
										return (
											<td
												key={cell.id}
											>
												{
													flexRender(
													cell.column.columnDef.cell, 
													cell.getContext()
													)
												}
											</td>
										)
									})
								}
							</tr>
						)
					})
										}
			</tbody>
		</table>
	)
}

```

#### API

###### Tableåˆå§‹åŒ–Option

```jsx
import {
	useReactTable,
	getCoreRowModel, Â  Â  Â  Â  Â  Â  Â  Â  Â // åŠæ—¶æ¸²æŸ“
	getPaginationRowModel, Â  Â  Â  Â  Â  Â // åˆ†é¡µ
	getSortedRowModel, Â  Â  Â  Â  Â  Â  Â  Â // æ’åº
	getFilteredRowModel, Â  Â  Â  Â  Â  Â  Â // æœç´¢
} from "@tanstack/react-table"

const App = () => {
	const [sortState, setSortState] = useState([]) Â  Â  Â  Â  Â  Â  Â  Â  Â // æ’åº
	const [columnFilters, setColumnFilters] = useState([]) Â  Â  Â  Â  Â // æœç´¢
	const [columnVisibility, setColumnVisibility] = useState([]) Â  Â // æ˜¾ç¤ºåˆ—
	const [rowSelection, setRowSelection] = useState([]) Â  Â  Â  Â  Â  Â // è®¾ç½®å¤šé€‰æ•°æ®
	
	const table = useReactTable({
		data,
		columns,
		getCoreRowModel: getCoreRowModel(),
		getPaginationRowModel: getPaginationRowModel(), Â  Â  // åˆ†é¡µ
		onSortingChange: setSortState, Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â // è®¾ç½®æ˜¯å¦å¼€å§‹æ’åº
		getSortedRowModel: getSortedRowModel(), Â  Â  Â  Â  Â  Â  // æ’åº
		onColumnFiltersChange: setColumnFilters, Â  Â  Â  Â  Â  Â // è®¾ç½®æœç´¢
		getFilteredRowModel: getFilteredRowModel(), Â  Â  Â  Â  // æœç´¢
		onColumnVisibilityChange: setColumnVisibility, Â  Â  Â // è®¾ç½®æ˜¾ç¤ºåˆ—
		onRowSelectionChange: setRowSelection, Â  Â  Â  Â  Â  Â  Â // è®¾ç½®å¤šé€‰æ•°æ®
		state: {
			sorting: sortState,
			columnFilters,
			columnVisibility,
			rowSelection,
		}
	})
}
```


##### Tableå¯¹è±¡
```js
table.Code()
// ä¾‹
table.getIsAllPageRowsSelected()
```

###### Selecté€‰æ‹©

| å‡½æ•°                          | å€¼       | æè¿°                |
| --------------------------- | ------- | ----------------- |
| getIsAllPageRowsSelected()  | æ—        | è·å–å½“å‰é¡µé¢æ˜¯å¦æ‰€æœ‰çš„è¡Œéƒ½è¢«é€‰ä¸­  |
| getIsSomePageRowsSelected() | æ—        | è·å–å½“å‰é¡µé¢æ˜¯å¦æœ‰éƒ¨åˆ†è¡Œè¢«é€‰ä¸­   |
| toggleAllPageRowsSelected() | boolean | è®¾ç½®å½“å‰é¡µé¢æ‰€æœ‰çš„è¡Œé€‰ä¸­æˆ–å–æ¶ˆé€‰ä¸­ |

##### Rowå¯¹è±¡
###### Selecté€‰æ‹©

| å‡½æ•°               | å€¼       | æè¿°           |
| ---------------- | ------- | ------------ |
| getIsSelected()  | æ—        | è·å–å½“å‰è¡Œæ˜¯å¦è¢«é€‰ä¸­   |
| toggleSelected() | boolean | è®¾ç½®å½“å‰è¡Œé€‰ä¸­æˆ–å–æ¶ˆé€‰ä¸­ |

##### Columnå¯¹è±¡

##### åˆ†é¡µAPI

###### Table è®¾ç½®

```jsx
const table = useReactTable({
Â  Â  data,
Â  Â  columns,
Â  Â  getCoreRowModel: getCoreRowModel(),
Â  Â  getPaginationRowModel: getPaginationRowModel(), Â  Â  // åˆ†é¡µ
Â  })
```
###### Table API

| å‡½æ•°                                    | å€¼   | æè¿°                          |
| ------------------------------------- | --- | --------------------------- |
| table.getPageCount()                  | æ—    | è·å–å½“å‰æ€»å…±æœ‰å¤šå°‘é¡µ                  |
| table.getState().pagination.pageIndex | æ—    | è·å–tableçš„stateï¼Œè·å–ä¸€é¡µå¤šå°‘è¡Œï¼Œç°åœ¨å¤šå°‘é¡µ |
| table.setPageIndex(Int)               | Int | è·³è½¬åˆ°æŒ‡å®šé¡µæ•°                     |
| table.previousPage()                  | æ—    | ä¸Šä¸€é¡µ                         |
| table.nextPage()                      | æ—    | ä¸‹ä¸€é¡µ                         |

##### ç­›é€‰API

###### Table è®¾ç½®


###### Table API
